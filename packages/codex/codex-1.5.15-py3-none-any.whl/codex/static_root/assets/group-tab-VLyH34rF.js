import{A as I,c as b,a as v,b as V,_ as f,V as D}from"./VDataTableVirtual-m8mHl6dt.js";import{M as k,t as m,N as w,_ as S,Q as c,R as G,ay as A,L as s,P as i,aC as T,aD as t,aH as j,aI as E,aa as p}from"./admin-drawer-panel-CzxhSiRn.js";import{a as y}from"./main-JHk9CBom.js";import{a as N}from"./VSlideGroup-BpKJ2pWX.js";import{V as g,a as H}from"./VRadioGroup-Chl8BuhK.js";import"./confirm-footer-4RE1GmaG.js";import"./confirm-dialog-WTc9Btcl.js";import"./VSelect-DAi26YRs.js";import"./VSelectionControl-K1Fk4HTO.js";import"./VCheckboxBtn-BdndkrO2.js";import"./VTable-w7IruQG5.js";import"./filter-kmJ9r_lC.js";const x=["name","userSet","librarySet"];Object.freeze(x);const _={name:"",userSet:[],librarySet:[]};Object.freeze(_);const O={name:"AdminGroupCreateUpdateInputs",components:{AdminRelationPicker:I},props:{oldRow:{type:[Object,Boolean],default:!1}},emits:["change"],data(){return{rules:{name:[e=>!!e||"Name is required",e=>!!e&&!this.names.has(e.trim())||"Name already used"]},row:y.cloneDeep(this.oldRow||_)}},computed:{...k(m,{groups:e=>e.groups,libraries:e=>e.libraries,users:e=>e.users}),names(){return this.nameSet(this.groups,"name",this.oldRow,!0)}},watch:{row:{handler(e){this.$emit("change",e)},deep:!0},oldRow:{handler(e){this.row=y.cloneDeep(e)},deep:!0}},methods:{...w(m,["nameSet"])},UPDATE_KEYS:x,EMPTY_ROW:_};function P(e,l,C,U,a,h){const d=b,u=c("AdminRelationPicker");return G(),A("div",null,[s(N,{modelValue:a.row.name,"onUpdate:modelValue":l[0]||(l[0]=n=>a.row.name=n),label:"Group Name",rules:a.rules.name,clearable:"",autofocus:""},null,8,["modelValue","rules"]),s(H,{inline:"",label:"Type","model-value":a.row.exclude,"hide-details":"auto","onUpdate:modelValue":l[1]||(l[1]=n=>a.row.exclude=n)},{default:i(()=>[s(g,{value:!1},{label:i(()=>[s(d,{item:{name:"Include",exclude:!1},"title-key":"name","group-type":""})]),_:1}),s(g,{value:!0},{label:i(()=>[s(d,{item:{name:"Exclude",exclude:!0},"title-key":"name","group-type":""})]),_:1})]),_:1},8,["model-value"]),s(u,{"model-value":a.row.userSet,label:"Users",objs:e.users,"title-key":"username","onUpdate:modelValue":l[2]||(l[2]=n=>a.row.userSet=n)},null,8,["model-value","objs"]),s(u,{"model-value":a.row.librarySet,label:"Libraries",objs:e.libraries,"title-key":"path","onUpdate:modelValue":l[3]||(l[3]=n=>a.row.librarySet=n)},null,8,["model-value","objs"])])}const L=S(O,[["render",P]]),z=180,B={name:"AdminGroupsTab",components:{AdminDeleteRowDialog:v,AdminCreateUpdateDialog:V,RelationChips:f,GroupChip:b},data(){return{lastUpdate:{pk:0,field:void 0},AdminGroupCreateUpdateInputs:T(L),GROUP_HELP_HEIGHT:z,headers:[{title:"Name",key:"name",align:"start"},{title:"Type",key:"exclude",align:"start"},{title:"Users",key:"userSet"},{title:"Libraries",key:"librarySet"},{title:"Actions",key:"actions",sortable:!1}]}},computed:{...k(m,{groups:e=>e.groups,libraries:e=>e.libraries,users:e=>e.users})},mounted(){this.loadTables(["User","Library","Group"])},methods:{...w(m,["loadTables"]),typeObj(e){return{name:e.exclude?"Exclude ":"Include",exclude:e.exclude}}}},o=e=>(j("data-v-e0c04bb9"),e=e(),E(),e),M={class:"tabHeader"},Y=o(()=>t("td",{class:"adminNoData",colspan:"100%"},"No groups",-1)),q={id:"groupHelp"},F=o(()=>t("h3",null,"Group Logic",-1)),K=o(()=>t("p",null," A library in no groups is accessible to every user and non-users if those are enabled. ",-1)),Q=o(()=>t("p",null,[p(" A library with "),t("em",null,"any"),p(" Include groups is accessible "),t("em",null,"only"),p(" to users who are in those groups. ")],-1)),W=o(()=>t("p",null,[p(" A library with "),t("em",null,"any"),p(" Exclude groups is not accessible to Guest users but is acccessable to any logged in users that are not in the Exclude groups. ")],-1)),J=o(()=>t("p",null," If you have libraries added and you do not see them in your browser, check to see if the library and your user are in the same group. ",-1)),X={id:"groupTable"},Z=o(()=>t("thead",null,[t("tr",null,[t("th",null,"Library in Group Type"),t("th",null,"Guest"),t("th",null,"User Out of Group"),t("th",null,"User In Group")])],-1)),$=o(()=>t("tr",null,[t("td",null,"Not in a Group"),t("td",{class:"see"},"Can See"),t("td",{class:"see"},"Can See"),t("td",{class:"see"},"Can See")],-1)),ee=o(()=>t("td",{class:"hidden"},"Hidden",-1)),te=o(()=>t("td",{class:"hidden"},"Hidden",-1)),se=o(()=>t("td",{class:"see"},"Can See",-1)),oe=o(()=>t("td",{class:"hidden"},"Hidden",-1)),ae=o(()=>t("td",{class:"see"},"Can See",-1)),le=o(()=>t("td",{class:"hidden"},"Hidden",-1));function ne(e,l,C,U,a,h){const d=c("AdminCreateUpdateDialog"),u=b,n=f,R=c("AdminDeleteRowDialog");return G(),A("div",null,[t("header",M,[s(d,{table:"Group","max-width":"20em",inputs:a.AdminGroupCreateUpdateInputs},null,8,["inputs"])]),s(D,{class:"adminTable","fixed-header":"","item-value":"pk","item-title":"name",headers:a.headers,items:e.groups},{"no-data":i(()=>[Y]),"item.exclude":i(({item:r})=>[s(u,{"group-type":"",item:h.typeObj(r),"title-key":"name"},null,8,["item"])]),"item.userSet":i(({item:r})=>[s(n,{pks:r.userSet,objs:e.users,"title-key":"username"},null,8,["pks","objs"])]),"item.librarySet":i(({item:r})=>[s(n,{pks:r.librarySet,objs:e.libraries,"title-key":"path"},null,8,["pks","objs"])]),"item.actions":i(({item:r})=>[s(d,{table:"Group","old-row":r,"max-width":"20em",inputs:a.AdminGroupCreateUpdateInputs,size:"small",density:"compact"},null,8,["old-row","inputs"]),s(R,{table:"Group",pk:r.pk,name:r.name,size:"small",density:"compact"},null,8,["pk","name"])]),_:2},1032,["headers","items"]),t("div",q,[F,K,Q,W,J,t("table",X,[Z,t("tbody",null,[$,t("tr",null,[t("td",null,[s(u,{item:{name:"Include",exclude:!1},"title-key":"name","group-type":""})]),ee,te,se]),t("tr",null,[t("td",null,[s(u,{item:{name:"Exclude",exclude:!0},"title-key":"name","group-type":""})]),oe,ae,le])])])])])}const fe=S(B,[["render",ne],["__scopeId","data-v-e0c04bb9"]]);export{fe as default};
