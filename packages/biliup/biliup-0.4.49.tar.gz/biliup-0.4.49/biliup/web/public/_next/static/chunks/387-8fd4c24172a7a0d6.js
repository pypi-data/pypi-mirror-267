"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[387],{1801:function(e,t,i){async function l(e,t){let{arg:i}=t;console.log(JSON.stringify(i));let l=await fetch(""+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!(l.status>=200&&l.status<300))throw Error(await l.text());let r=await l.json();if(!l.ok)throw Error(r.message);return r}i.d(t,{_i:function(){return r},gz:function(){return s},hw:function(){return a},sj:function(){return n},wG:function(){return l}});let r=async function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let l=await fetch(""+t[0],t[1]);if(!l.ok)throw Error(await l.text());return l.json()},n=async(e,t)=>{let i=await fetch(""+e,t);if(!i.ok)throw Error(await i.text());return i};async function a(e,t){let{arg:i}=t,l=await fetch("".concat("").concat(e,"/").concat(i),{method:"DELETE"});if(!l.ok)throw Error(await l.text());return l}async function s(e,t){let{arg:i}=t,l=await fetch("".concat("").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!l.ok)throw Error(await l.text());return l}},74333:function(e,t,i){i.d(t,{Bf:function(){return s},JB:function(){return o},ZP:function(){return a}});var l=i(81252),r=i(1801),n=i(2265);function a(){let{data:e,error:t,isLoading:i}=(0,l.ZP)("/v1/streamers",r._i);return{isLoading:i,streamers:e}}function s(){let{data:e,error:t,isLoading:i}=(0,l.ZP)("/v1/users",r._i),[a,s]=(0,n.useState)([]);return(0,n.useEffect)(()=>{if(!e||0===e.length)return;let t=async e=>{try{let t=await (0,r._i)("/bili/space/myinfo?user=".concat(e.value),void 0),i=await (0,r.sj)("/bili/proxy?url=".concat(t.data.face)),l=await i.blob();return{...e,name:t.data.name,face:URL.createObjectURL(l)}}catch(l){console.error(l);let t=await (0,r.sj)("/bili/proxy?url=https://i0.hdslb.com/bfs/face/member/noface.jpg"),i=await t.blob();return{...e,name:"Cookie已失效",face:URL.createObjectURL(i)}}};Promise.all(e.map(t)).then(s)},[e]),{isLoading:i,isError:t,biliUsers:a}}function o(){var e;let{data:t,error:i,isLoading:n}=(0,l.ZP)("/bili/archive/pre",r._i);return{isLoading:n,isError:i,typeTree:null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.typelist.map(e=>({label:e.name,value:e.id,children:e.children}))}}},49808:function(e,t,i){i.d(t,{cE:function(){return n},f:function(){return l},ql:function(){return r}});let l={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},r=(e,t)=>{let{match:i,unmatch:l,callInInit:r=!0}=t;{let t=window.matchMedia(e),n=function(e){e.matches?i&&i(e):l&&l(e)};return(r&&n(t),Object.prototype.hasOwnProperty.call(t,"addEventListener"))?(t.addEventListener("change",n),()=>t.removeEventListener("change",n)):(t.addListener(n),()=>t.removeListener(n))}},n=e=>new Date(1e3*e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replaceAll("/","-")},50098:function(e,t,i){var l=i(57437),r=i(2265),n=i(20685),a=i(93038),s=i(13192),o=i(28684),c=i(86951),d=i(74333);t.Z=e=>{let{formState:t,formApi:i,values:u}=e,{Section:h,Input:f,DatePicker:x,TimePicker:m,Select:p,Switch:j,InputNumber:y,Checkbox:w,CheckboxGroup:b,RadioGroup:g,Radio:v,Cascader:_,TagInput:C,TextArea:E}=c.Form,{Text:S}=c.Typography,{typeTree:k,isError:L,isLoading:P}=(0,d.JB)(),F=null==k?void 0:k.map(e=>({...e,children:e.children.map(e=>({label:(0,l.jsxs)(l.Fragment,{children:[e.name," ",(0,l.jsx)(S,{type:"quaternary",size:"small",children:e.desc})]}),value:e.id}))})),O=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b,{field:"sound",options:[{label:"杜比音效",value:"dolby"},{label:"Hi-Res无损音质",value:"hires"}],direction:"horizontal",label:"音效设置"}),(0,l.jsx)(b,{field:"interaction",options:[{label:"关闭弹幕",value:"up_close_danmu"},{label:"关闭评论",value:"up_close_reply"},{label:"开启精选评论",value:"up_selection_reply"}],direction:"horizontal",label:"互动设置"}),(0,l.jsx)(f,{field:"dynamic",label:"粉丝动态",style:{width:464}}),(0,l.jsxs)(c.Form.Select,{field:"uploader",label:"上传插件",style:{width:250},showClear:!0,children:[(0,l.jsx)(c.Form.Select.Option,{value:"bili_web",children:"bili_web"}),(0,l.jsx)(c.Form.Select.Option,{value:"biliup-rs",children:"biliup-rs"}),(0,l.jsx)(c.Form.Select.Option,{value:"Noop",children:"Noop"})]}),(0,l.jsx)(j,{field:"no_reprint",label:"自制声明"}),(0,l.jsx)(c.Form.Switch,{field:"open_elec",label:"开启充电面板"}),(0,l.jsx)(c.OF,{field:"credits",children:e=>{let{add:t,arrayFields:i}=e;return(0,l.jsxs)(c.Form.Section,{text:"简介@替换",children:[(0,l.jsxs)("div",{className:"semi-form-field-extra",style:{fontSize:"14px"},children:["如需在简介中@别人，请使用此项。示例：",(0,l.jsx)("br",{}),"简介：","{","streamer","}","主播直播间地址：","{","url","}"," 【@credit】",(0,l.jsx)("br",{}),'其中的"@credits"会依次替换为下面输入的@']}),(0,l.jsx)(c.zx,{icon:(0,l.jsx)(n.Z,{}),onClick:t,theme:"light",children:"添加行"}),i.map((e,t)=>{let{field:i,key:r,remove:n}=e;return(0,l.jsxs)("div",{style:{width:1e3,display:"flex"},children:[(0,l.jsxs)(c.BZ,{children:[(0,l.jsx)(f,{field:"".concat(i,".username"),label:"需要@的用户名",placeholder:"username"}),(0,l.jsx)(f,{field:"".concat(i,".uid"),label:"需要@的uid",placeholder:"uid"})]}),(0,l.jsx)(c.zx,{type:"danger",theme:"borderless",icon:(0,l.jsx)(a.Z,{}),onClick:n,style:{margin:12}})]},r)})]})}})]}),[T,Z]=(0,r.useState)(!1),{biliUsers:z}=(0,d.Bf)(),R=null==z?void 0:z.map(e=>({value:e.value,label:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.qE,{size:"extra-small",src:e.face}),(0,l.jsx)("span",{style:{marginLeft:8},children:e.name})]})}));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h,{text:"基本信息",children:[(0,l.jsx)(f,{rules:[{required:!0}],field:"template_name",label:"模板名称",style:{width:464}}),(0,l.jsx)(c.Form.Select,{rules:[{required:!0}],field:"user_cookie",label:{text:"投稿账号"},style:{width:176},optionList:R})]}),(0,l.jsxs)(h,{text:"基本设置",children:[(0,l.jsx)(f,{field:"title",label:"视频标题",style:{width:464},placeholder:"稿件标题"}),(0,l.jsxs)(g,{field:"copyright",label:"类型",direction:"vertical",children:[(0,l.jsx)("div",{onClick:()=>i.setValue("source",""),children:(0,l.jsx)(v,{value:1,children:"自制"})}),(0,l.jsxs)(v,{value:2,style:{alignItems:"center",flexShrink:0},children:[(0,l.jsx)("span",{style:{flexShrink:0},children:"转载"}),(0,l.jsx)(f,{field:"source",onClick:()=>i.setValue("copyright",2),placeholder:"转载视频请注明来源（例：转自http://www.xx.com/yy）注明来源会更快地通过审核哦",noLabel:!0,fieldStyle:{padding:0,marginLeft:24,width:560}})]})]}),(0,l.jsx)(_,{field:"tid",label:"分区",style:{width:272},treeData:F,placeholder:"投稿分区",dropdownStyle:{maxWidth:670},rules:[{required:!0}]}),(0,l.jsx)(C,{max:12,maxLength:20,field:"tags",label:"标签",allowDuplicates:!1,placeholder:"输入标签，Enter 确定",onChange:e=>console.log(e),style:{width:560},rules:[{required:!0,message:"Tag不能为空"}],onExceed:e=>{c.P_.warning({title:"标签输入错误",position:"top",content:"标签数量不能超过12个",duration:3})},onInputExceed:e=>{c.P_.warning({title:"标签输入错误",position:"top",content:"单个标签字数不能超过20",duration:3})}}),(0,l.jsx)(f,{field:"cover_path",label:"视频封面",style:{width:464},placeholder:"/cover/up.jpg"}),(0,l.jsx)(E,{style:{maxWidth:560},field:"description",label:"简介",placeholder:"填写更全面的相关信息，让更多的人能找到你的视频吧",autosize:!0,maxCount:2e3,showClear:!0}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",color:"var(--semi-color-tertiary)"},children:[(0,l.jsx)(j,{field:"isDtime",label:{text:"定时发布"},checkedText:"｜",uncheckedText:"〇"}),(0,l.jsx)("span",{style:{paddingLeft:12,fontSize:12},children:"(当前+2小时 ≤ 可选时间 ≤ 当前+15天，转载稿件撞车判定以过审发布时间为准)"})]}),u.isDtime?(0,l.jsx)(x,{field:"dtime",label:" ",type:"dateTime",fieldStyle:{paddingTop:0}}):null]}),(0,l.jsx)(h,{style:{paddingBottom:40},text:(0,l.jsxs)("div",{style:{cursor:"pointer"},onClick:()=>{Z(!T),i.scrollToField("isDtime")},children:["更多设置 ",T?(0,l.jsx)(s.Z,{style:{marginLeft:12}}):(0,l.jsx)(o.Z,{style:{marginLeft:12}})]}),children:(0,l.jsx)(c.zF,{isOpen:T,keepDOM:!0,children:O})})]})}},93038:function(e,t,i){var l=i(2265);let r=(0,i(79238).A)(function(e){return l.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM6.5 10.5H17.5C18.3284 10.5 19 11.1716 19 12C19 12.8284 18.3284 13.5 17.5 13.5H6.5C5.67157 13.5 5 12.8284 5 12C5 11.1716 5.67157 10.5 6.5 10.5Z",fill:"currentColor"}))},"minus_circle");t.Z=r},47907:function(e,t,i){var l=i(15313);i.o(l,"usePathname")&&i.d(t,{usePathname:function(){return l.usePathname}}),i.o(l,"useRouter")&&i.d(t,{useRouter:function(){return l.useRouter}}),i.o(l,"useSearchParams")&&i.d(t,{useSearchParams:function(){return l.useSearchParams}})}}]);