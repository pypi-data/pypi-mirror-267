import{n as Re,t as Ie,q as z,v as G,x as ae,y as te,z as ne,A as le,D as w,E as S,F as D,G as ee,H as ie,M as xe,r as re,I as U,J as Ce,K as x,R as s,N as Ae,O as y,Q as ke,T as Te,a as A,U as O,V as o,X as Z,Y as q,Z as se,$ as V,a0 as ce,a1 as Se,a2 as M,a3 as De,a4 as ze,u as Fe,P as Oe,a5 as Ke,l as Le,h as H,a6 as oe,p as je,a7 as Me,a8 as _e,a9 as Ge}from"./index.aeb53d4d.js";var de=function(a){return{active:!1,type:"ellipsisItem",value:a}},Be=function(){return{active:!1,type:"firstItem",value:1}},Ve=function(a){return{active:!1,type:"prevItem",value:Math.max(1,a-1)}},We=function(a){return function(n){return{active:a===n,type:"pageItem",value:n}}},$e=function(a,n){return{active:!1,type:"nextItem",value:Math.min(a+1,n)}},He=function(a){return{active:!1,type:"lastItem",value:a}},Ue=Math.ceil,Ze=Math.max;function qe(e,a,n,t){for(var l=-1,i=Ze(Ue((a-e)/(n||1)),0),r=Array(i);i--;)r[t?i:++l]=e,e+=n;return r}var Je=qe,Qe=Je,Xe=Re,$=Ie;function Ye(e){return function(a,n,t){return t&&typeof t!="number"&&Xe(a,n,t)&&(n=t=void 0),a=$(a),n===void 0?(n=a,a=0):n=$(n),t=t===void 0?a<n?1:-1:$(t),Qe(a,n,t,e)}}var ea=Ye,aa=ea,ta=aa(),na=ta,la=function(a,n,t){var l=n-1,i=l!==a+1,r=i?de:t;return r(l)},ia=function(a,n,t){var l=a+1,i=l!==n-1,r=i?de:t;return r(l)},B=function(a,n,t){return z(na(a,n+1),t)},ra=function(a,n){var t=a.activePage,l=a.boundaryRange,i=a.hideEllipsis,r=a.siblingRange,c=a.totalPages,m=i?0:1,d=l,v=B(1,d,n),f=c+1-l,b=B(f,c,n),g=Math.min(Math.max(t-r,d+m+1),f-m-2*r-1),h=g+2*r,p=B(g,h,n);return[].concat(G(v),[!i&&la(d,g,n)],G(p),[!i&&ia(h,f,n)],G(b)).filter(Boolean)},sa=function(a){var n=a.boundaryRange,t=a.hideEllipsis,l=a.siblingRange,i=a.totalPages,r=2*n,c=t?0:2,m=2*l;return 1+c+m+r>=i},ca=function(a){var n=a.activePage,t=a.boundaryRange,l=a.hideEllipsis,i=a.siblingRange,r=a.totalPages;return{activePage:+n,boundaryRange:+t,hideEllipsis:!!l,siblingRange:+i,totalPages:+r}},oa=function(a){var n=ca(a),t=n.activePage,l=n.totalPages,i=We(t),r=sa(n)?B(1,l,i):ra(n,i);return[Be(),Ve(t)].concat(G(r),[$e(t,l),He(l)])};const da=oa;var F=function(e){ae(a,e);function a(){var n,t;te(this,a);for(var l=arguments.length,i=new Array(l),r=0;r<l;r++)i[r]=arguments[r];return t=ne(this,(n=le(a)).call.apply(n,[this].concat(i))),w(D(t),"handleClick",function(c){S(t.props,"onClick",c,t.props)}),w(D(t),"handleKeyDown",function(c){S(t.props,"onKeyDown",c,t.props),ee.getCode(c)===ee.Enter&&S(t.props,"onClick",c,t.props)}),w(D(t),"handleOverrides",function(){return{onClick:t.handleClick,onKeyDown:t.handleKeyDown}}),t}return ie(a,[{key:"render",value:function(){var t=this.props,l=t.active,i=t.type,r=this.props.disabled||i==="ellipsisItem";return xe.create(this.props,{defaultProps:{active:l,"aria-current":l,"aria-disabled":r,disabled:r,onClick:this.handleClick,onKeyDown:this.handleKeyDown,tabIndex:r?-1:0},overrideProps:this.handleOverrides})}}]),a}(re.exports.Component);w(F,"handledProps",["active","disabled","onClick","onKeyDown","type"]);F.propTypes={};F.create=U(F,function(e){return{content:e}});const ue=F;var k=function(e){ae(a,e);function a(){var n,t;te(this,a);for(var l=arguments.length,i=new Array(l),r=0;r<l;r++)i[r]=arguments[r];return t=ne(this,(n=le(a)).call.apply(n,[this].concat(i))),w(D(t),"handleItemClick",function(c,m){var d=m.value,v=t.state.activePage;+v!=+d&&(t.trySetState({activePage:d}),S(t.props,"onPageChange",c,Ce({},t.props,{activePage:d})))}),w(D(t),"handleItemOverrides",function(c,m,d){return function(v){return{active:c,type:m,key:"".concat(m,"-").concat(d),onClick:function(b,g){S(v,"onClick",b,g),g.type!=="ellipsisItem"&&t.handleItemClick(b,g)}}}}),t}return ie(a,[{key:"render",value:function(){var t=this,l=this.props,i=l["aria-label"],r=l.boundaryRange,c=l.disabled,m=l.ellipsisItem,d=l.siblingRange,v=l.totalPages,f=this.state.activePage,b=da({activePage:f,boundaryRange:r,hideEllipsis:Te(m),siblingRange:d,totalPages:v}),g=x(a,this.props);return s.createElement(Ae,y({},g,{"aria-label":i,pagination:!0,role:"navigation"}),z(b,function(h){var p=h.active,R=h.type,N=h.value;return ue.create(t.props[R],{defaultProps:{content:N,disabled:c,value:N},overrideProps:t.handleItemOverrides(p,R,N)})}))}}]),a}(ke);w(k,"autoControlledProps",["activePage"]);w(k,"defaultProps",{"aria-label":"Pagination Navigation",boundaryRange:1,ellipsisItem:"...",firstItem:{"aria-label":"First item",content:"\xAB"},lastItem:{"aria-label":"Last item",content:"\xBB"},nextItem:{"aria-label":"Next item",content:"\u27E9"},pageItem:{},prevItem:{"aria-label":"Previous item",content:"\u27E8"},siblingRange:1});w(k,"Item",ue);w(k,"handledProps",["activePage","aria-label","boundaryRange","defaultActivePage","disabled","ellipsisItem","firstItem","lastItem","nextItem","onPageChange","pageItem","prevItem","siblingRange","totalPages"]);k.propTypes={};function C(e){var a=e.children,n=e.className,t=A(n),l=x(C,e),i=O(C,e);return s.createElement(i,y({},l,{className:t}),a)}C.handledProps=["as","children","className"];C.defaultProps={as:"tbody"};C.propTypes={};function E(e){var a=e.active,n=e.children,t=e.className,l=e.collapsing,i=e.content,r=e.disabled,c=e.error,m=e.icon,d=e.negative,v=e.positive,f=e.selectable,b=e.singleLine,g=e.textAlign,h=e.verticalAlign,p=e.warning,R=e.width,N=A(o(a,"active"),o(l,"collapsing"),o(r,"disabled"),o(c,"error"),o(d,"negative"),o(v,"positive"),o(f,"selectable"),o(b,"single line"),o(p,"warning"),Z(g),q(h),se(R,"wide"),t),L=x(E,e),j=O(E,e);return V(n)?s.createElement(j,y({},L,{className:N}),ce.create(m),i):s.createElement(j,y({},L,{className:N}),n)}E.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"];E.defaultProps={as:"td"};E.propTypes={};E.create=U(E,function(e){return{content:e}});function I(e){var a=e.children,n=e.className,t=e.content,l=e.fullWidth,i=A(o(l,"full-width"),n),r=x(I,e),c=O(I,e);return s.createElement(c,y({},r,{className:i}),V(a)?t:a)}I.handledProps=["as","children","className","content","fullWidth"];I.defaultProps={as:"thead"};I.propTypes={};function T(e){var a=e.as,n=x(T,e);return s.createElement(I,y({},n,{as:a}))}T.handledProps=["as"];T.propTypes={};T.defaultProps={as:"tfoot"};function K(e){var a=e.as,n=e.className,t=e.sorted,l=A(Se(t,"sorted"),n),i=x(K,e);return s.createElement(E,y({},i,{as:a,className:l}))}K.handledProps=["as","className","sorted"];K.propTypes={};K.defaultProps={as:"th"};function P(e){var a=e.active,n=e.cellAs,t=e.cells,l=e.children,i=e.className,r=e.disabled,c=e.error,m=e.negative,d=e.positive,v=e.textAlign,f=e.verticalAlign,b=e.warning,g=A(o(a,"active"),o(r,"disabled"),o(c,"error"),o(m,"negative"),o(d,"positive"),o(b,"warning"),Z(v),q(f),i),h=x(P,e),p=O(P,e);return V(l)?s.createElement(p,y({},h,{className:g}),z(t,function(R){return E.create(R,{defaultProps:{as:n}})})):s.createElement(p,y({},h,{className:g}),l)}P.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"];P.defaultProps={as:"tr",cellAs:"td"};P.propTypes={};P.create=U(P,function(e){return{cells:e}});function u(e){var a=e.attached,n=e.basic,t=e.celled,l=e.children,i=e.className,r=e.collapsing,c=e.color,m=e.columns,d=e.compact,v=e.definition,f=e.fixed,b=e.footerRow,g=e.headerRow,h=e.headerRows,p=e.inverted,R=e.padded,N=e.renderBodyRow,L=e.selectable,j=e.singleLine,me=e.size,ve=e.sortable,ge=e.stackable,fe=e.striped,he=e.structured,be=e.tableData,Pe=e.textAlign,ye=e.unstackable,pe=e.verticalAlign,J=A("ui",c,me,o(t,"celled"),o(r,"collapsing"),o(v,"definition"),o(f,"fixed"),o(p,"inverted"),o(L,"selectable"),o(j,"single line"),o(ve,"sortable"),o(ge,"stackable"),o(fe,"striped"),o(he,"structured"),o(ye,"unstackable"),M(a,"attached"),M(n,"basic"),M(d,"compact"),M(R,"padded"),Z(Pe),q(pe),se(m,"column"),"table",i),Q=x(u,e),X=O(u,e);if(!V(l))return s.createElement(X,y({},Q,{className:J}),l);var we=g||h,Y={defaultProps:{cellAs:"th"}},Ee=we&&s.createElement(I,null,P.create(g,Y),z(h,function(W){return P.create(W,Y)}));return s.createElement(X,y({},Q,{className:J}),Ee,s.createElement(C,null,N&&z(be,function(W,Ne){return P.create(N(W,Ne))})),b&&s.createElement(T,null,P.create(b)))}u.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"];u.defaultProps={as:"table"};u.propTypes={};u.Body=C;u.Cell=E;u.Footer=T;u.Header=I;u.HeaderCell=K;u.Row=P;const _=25,ua=e=>{const{dir:a,path:n,setFilePath:t}=e,[l,i]=re.exports.useState(0),r=Object.keys(a.dirs).sort(),c=Object.keys(a.files).sort(),m=[...r,...c];return s.createElement("div",{"data-test-weave-id":"dir",style:{height:"100%",width:"100%",overflow:"auto"}},s.createElement(u,{unstackable:!0,selectable:!0,className:"file-browser-table"},s.createElement(u.Body,null,m.slice(l,l+_).map(d=>{if(a.dirs[d]!=null)return s.createElement(ma,{key:"folder-"+d,dir:a.dirs[d],dirName:d,path:n,setFilePath:t});{const v=a.files[d];return s.createElement(va,{key:"file-"+d,fileName:d,file:v,path:n,setFilePath:t})}}))),m.length>_&&s.createElement("div",{style:{display:"flex",justifyContent:"center"}},s.createElement(k,{defaultActivePage:1,totalPages:Math.ceil(m.length/_),onPageChange:(d,v)=>{const f=v.activePage;f!=null&&Le.exports.isNumber(f)&&i((f-1)*_)},size:"small"})))},ma=e=>{const{dir:a,dirName:n,path:t,setFilePath:l}=e,i=Object.keys(a.dirs).length,r=Object.keys(a.files).length,c=t?.concat([n])??[n];return s.createElement(u.Row,{className:"file-browser-folder",onClick:()=>l(c)},s.createElement(u.Cell,{className:"folder-name-cell"},s.createElement("div",{className:"file-browser-name-cell-wrapper"},s.createElement(H,{className:"file-browser-icon",name:"folder"}),s.createElement("span",{className:"file-browser-folder-name"},n),"\xA0/")),s.createElement(u.Cell,{className:"file-link-cell"}),s.createElement(u.Cell,{className:"file-size-cell"},oe(a.size).format("0.0b")),s.createElement(u.Cell,{className:"contents-cell"},i!==0&&i+(i===1?" subfolder, ":" subfolders, "),r+(r===1?" file":" files")))},va=e=>{const{file:a,fileName:n,path:t,setFilePath:l}=e,i=t?.concat([n])??[n],r=ga(n);return s.createElement(u.Row,{onClick:()=>{a.ref?a.ref.startsWith("http://")&&window.open(a.ref):l(i)}},s.createElement(u.Cell,{className:"file-name-cell"},s.createElement("div",{className:"file-browser-name-cell-wrapper"},a.ref!=null?s.createElement(ce,{style:{color:je,width:28},name:"arrow alternate circle right outline"}):s.createElement(H,{className:"file-browser-icon",name:r}),s.createElement("span",{className:"file-browser-file-name"},n.split("/").pop()))),s.createElement(u.Cell,{className:"file-link-cell"},a.ref??""),s.createElement(u.Cell,{className:"file-size-cell"},oe(a.size).format("0.0b")),s.createElement(u.Cell,{className:"file-download-cell"},s.createElement("a",{href:a.url,download:n,onClick:c=>c.stopPropagation()},s.createElement(H,{name:"download"}))))};function ga(e){switch(Me(e)){case"md":return"file-markdown";case"log":case"text":case"txt":return"file";case"js":case"css":case"patch":case"json":case"sh":return"file-code";case"ipynb":case"py":return"file-python";case"yml":case"yaml":case"xml":case"html":case"htm":return"file-yaml";case"jpg":case"jpeg":case"png":case".tiff":case".tif":case".gif":return"file-image"}return"file"}const ha=e=>{const a=e.input,n=De({dir:ze({file:a})}),t=Fe(n);if(t.loading)return s.createElement(Oe,null);if(t.result==null)return s.createElement("div",null);const l=t.result;return s.createElement(ua,{dir:l,path:e.context?.path,setFilePath:i=>{e.updateInput!=null?e.updateInput(Ke({input:{type:"dir"}},({input:r})=>_e({dir:r,path:Ge(i.join("/"))})).val):e.updateContext({path:i})}})};export{ha as default};
//# sourceMappingURL=Component.1e9a280e.js.map
