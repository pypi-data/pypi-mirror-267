Metadata-Version: 2.1
Name: mango-odm
Version: 0.4.0
Summary: ğŸ¥­ Async MongoDB ODM with type hints in Python
Keywords: mongo mongodb async asyncio odm types pydantic motor
Author-Email: Akirami <akiramiaya@outlook.com>
License: MIT
Classifier: Development Status :: 4 - Beta
Classifier: Framework :: AsyncIO
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3 :: Only
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Topic :: Database
Classifier: Topic :: Database :: Front-Ends
Classifier: Topic :: Software Development
Classifier: Topic :: Software Development :: Object Brokering
Classifier: Topic :: Software Development :: Libraries
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Typing :: Typed
Project-URL: Repository, https://github.com/A-kirami/mango
Requires-Python: <4.0,>=3.10
Requires-Dist: motor>=3.3.2
Requires-Dist: pydantic>=2.6.1
Requires-Dist: motor-types>=1.0.0b4
Description-Content-Type: text/markdown

<p align="center">
    <a name="readme-top"></a>
    <a href="https://github.com/A-kirami/mango">
        <img width="140px" src="https://raw.githubusercontent.com/A-kirami/mango/main/assets/mango-logo.svg" align="center" alt="Mango" />
    </a>
    <h1 align="center">Mango</h1>
    <p align="center">ğŸ¥­ å¸¦æœ‰ç±»å‹æç¤ºçš„ Python å¼‚æ­¥ MongoDB å¯¹è±¡æ–‡æ¡£æ˜ å°„å™¨</p>
</p>
<p align="center">
    <a href="./LICENSE">
        <img src="https://img.shields.io/github/license/A-kirami/mango.svg" alt="license">
    </a>
    <a href="https://pypi.python.org/pypi/mango-odm">
        <img src="https://img.shields.io/pypi/v/mango-odm.svg" alt="pypi">
    </a>
    <a href="https://www.python.org/">
        <img src="https://img.shields.io/badge/python-3.10+-blue.svg" alt="python">
    </a>
</p>
<p align="center">
    <a href="#-ç¤ºä¾‹">æŸ¥çœ‹æ¼”ç¤º</a>
    Â·
    <a href="https://github.com/A-kirami/mango/issues/new?assignees=&labels=bug&template=bug_report.yml&title=%5BBUG%5D%3A+">é”™è¯¯æŠ¥å‘Š</a>
    Â·
    <a href="https://github.com/A-kirami/mango/issues/new?assignees=&labels=enhancement&template=feature_request.yml&title=%5BFeature%5D%3A+">åŠŸèƒ½è¯·æ±‚</a>
</p>
<p align="center">
    <strong>ç®€ä½“ä¸­æ–‡</strong>
    Â·
    <a href="/docs/README_EN.md">English</a>
    Â·
    <a href="/docs/README_JA.md">æ—¥æœ¬èª</a>
</p>

## ğŸ”– ç›®å½•

<details open="open">
  <summary>ç›®å½•</summary>
  <ul>
    <li>
        <a href="#-ç®€ä»‹">ç®€ä»‹</a>
        <ul>
            <li><a href="#-æ ¸å¿ƒç‰¹æ€§">æ ¸å¿ƒç‰¹æ€§</a></li>
        </ul>
    </li>
    <li>
        <a href="#-å®‰è£…">å®‰è£…</a>
        <ul>
            <li><a href="#PIP">PIP</a></li>
            <li><a href="#Poetry">Poetry</a></li>
        </ul>
    </li>
    <li>
        <a href="#-ç¤ºä¾‹">ç¤ºä¾‹</a>
    </li>
    <li>
        <a href="#-è´¡çŒ®">è´¡çŒ®</a>
        <ul>
            <li><a href="#-é¸£è°¢">é¸£è°¢</a></li>
        </ul>
    </li>
    <li><a href="#-æ”¯æŒ">æ”¯æŒ</a></li>
    <li><a href="#-è®¸å¯è¯">è®¸å¯è¯</a></li>
  </ul>
</details>

## ğŸ“– ç®€ä»‹

Mango æ˜¯ä¸€ä¸ªå¸¦æœ‰ç±»å‹æç¤ºçš„ Python å¼‚æ­¥ MongoDB å¯¹è±¡æ–‡æ¡£æ˜ å°„å™¨(ODM)ï¼Œå®ƒæ„å»ºåœ¨ [Motor](https://motor.readthedocs.io/en/stable/) å’Œ [Pydantic](https://pydantic-docs.helpmanual.io/) ä¹‹ä¸Šã€‚

Mango ä½¿å¾—æ•°æ®å»ºæ¨¡å’ŒæŸ¥è¯¢å˜å¾—éå¸¸å®¹æ˜“ï¼Œå¸®åŠ©æ‚¨å…³æ³¨åº”ç”¨ç¨‹åºä¸­çœŸæ­£é‡è¦çš„éƒ¨åˆ†ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§ï¼š

- **å®Œå–„çš„ç±»å‹æ ‡æ³¨**ï¼šåˆ©ç”¨é™æ€åˆ†ææ¥å‡å°‘è¿è¡Œæ—¶é—®é¢˜
- **ç®€æ´æµç•…çš„ API**ï¼šæ›´æ˜“äºå­¦ä¹ å’Œä½¿ç”¨ï¼Œæé«˜å¼€å‘æ•ˆç‡
- **ä¼˜é›…çš„ç¼–è¾‘å™¨æ”¯æŒ**ï¼šè‡ªåŠ¨å®Œæˆæ— å¤„ä¸åœ¨ï¼Œä»å¯¹è±¡åˆ›å»ºåˆ°æŸ¥è¯¢ç»“æœ

<p align="right">[<a href="#readme-top">â¬†å›åˆ°é¡¶éƒ¨</a>]</p>

## ğŸš€ å®‰è£…

### PIP

```shell
pip install mango-odm
```
### Poetry

```shell
poetry add mango-odm
```

<p align="right">[<a href="#readme-top">â¬†å›åˆ°é¡¶éƒ¨</a>]</p>

## ğŸŒŸ ç¤ºä¾‹

```python
import asyncio

from mango import Document, EmbeddedDocument, Field, Mango


# åµŒå…¥å¼æ–‡æ¡£
class Author(EmbeddedDocument):
    name: str
    profile: str | None = None


# Mango æ–‡æ¡£æ¨¡å‹
class Book(Document):
    name: str = Field(primary_key=True)  # å°†å­—æ®µè®¾ç½®ä¸ºä¸»é”®ï¼Œå¦‚æœä¸æ˜¾å¼æŒ‡å®šä¸»é”®ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»º id å­—æ®µä½œä¸ºä¸»é”®
    summary: str | None = None
    author: Author  # åµŒå…¥æ–‡æ¡£
    price: int = Field(index=True)  # ä¸ºå­—æ®µæ·»åŠ ç´¢å¼•


async def main():
    # åˆå§‹åŒ– Mangoï¼Œå®ƒä¼šåˆ›å»ºè¿æ¥å¹¶åˆå§‹åŒ–æ–‡æ¡£æ¨¡å‹ï¼Œä½ å¯ä»¥ä¼ å…¥ db æˆ–è€… uri å‚æ•°æ¥æŒ‡å®šè¿æ¥
    await Mango.init()

    # åƒ pydantic çš„æ¨¡å‹ä¸€æ ·ä½¿ç”¨
    book = Book(name="book", author=Author(name="author"), price=10)
    # å°†å®ƒæ’å…¥åˆ°æ•°æ®åº“ä¸­
    await book.save()

    # Mango æä¾›äº†ä¸°å¯Œçš„æŸ¥è¯¢è¯­è¨€ï¼Œå…è®¸æ‚¨ä½¿ç”¨ Python è¡¨è¾¾å¼æ¥æŸ¥è¯¢
    if book := await Book.find(Book.price <= 20, Book.author.name == "author").get():
        # æ›´æ–°æ–‡æ¡£çš„ summary å­—æ®µ
        book.summary = "summary"
        await book.update()


if __name__ == "__main__":
    asyncio.run(main())

```

<p align="right">[<a href="#readme-top">â¬†å›åˆ°é¡¶éƒ¨</a>]</p>

## ğŸ¤ è´¡çŒ®

æƒ³ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºä¸€ä»½è´¡çŒ®å—ï¼Ÿ[ç‚¹å‡»è¿™é‡Œ]()é˜…è¯»å¹¶äº†è§£å¦‚ä½•è´¡çŒ®ã€‚

### ğŸ‰ é¸£è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€å‘è€…å¯¹è¯¥é¡¹ç›®åšå‡ºçš„è´¡çŒ®ï¼š

<a href="https://github.com/A-kirami/mango/graphs/contributors">
  <img src="https://contrib.rocks/image?repo=A-kirami/mango" />
</a>

<p align="right">[<a href="#readme-top">â¬†å›åˆ°é¡¶éƒ¨</a>]</p>

## ğŸ’– æ”¯æŒ

å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Ÿè¯·ç‚¹äº® star å¹¶åˆ†äº«å®ƒï¼

<p align="right">[<a href="#readme-top">â¬†å›åˆ°é¡¶éƒ¨</a>]</p>

## ğŸ“ è®¸å¯è¯

åœ¨ `MIT` è®¸å¯è¯ä¸‹åˆ†å‘ã€‚è¯·å‚é˜… [LICENSE](./LICENSE) ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚

<p align="right">[<a href="#readme-top">â¬†å›åˆ°é¡¶éƒ¨</a>]</p>